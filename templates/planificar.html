{% extends "base.html" %}
{% block title %}Planificación semanal{% endblock %}
{% block content %}

<h2 class="mb-4">Semana {{ semana }} <small class="text-muted">({{ fechas[0] }} – {{ fechas[4] }})</small></h2>

<div class="d-flex justify-content-between mb-4">
    <a href="/planificar?semana={{ semana - 1 }}" class="btn btn-outline-primary">← Semana anterior</a>
    <a href="/planificar?semana={{ semana + 1 }}" class="btn btn-outline-primary">Semana siguiente →</a>
</div>

<form method="POST" class="row g-3">
    {% for i in range(5) %}
        {% set pedido = pedidos_guardados.get(fechas[i], (0, 0)) %}
        <div class="col-12">
            <fieldset class="border rounded p-3 mb-3">
                <legend class="float-none w-auto px-2 fw-bold">{{ dias[i] }} {{ fechas[i] }}</legend>
                <input type="hidden" name="fecha{{ i }}" value="{{ fechas[i] }}">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="almuerzo{{ i }}" id="almuerzo{{ i }}" {% if pedido[0] %}checked{% endif %}>
                    <label class="form-check-label" for="almuerzo{{ i }}">Almuerzo</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="cena{{ i }}" id="cena{{ i }}" {% if pedido[1] %}checked{% endif %}>
                    <label class="form-check-label" for="cena{{ i }}">Cena</label>
                </div>
            </fieldset>
        </div>
    {% endfor %}
    <input type="hidden" name="semana" value="{{ semana }}">
    <div class="col-12">
        <button type="submit" class="btn btn-success">Guardar planificación</button>
    </div>
</form>

<div class="mt-4">
    <a href="/" class="btn btn-secondary">Volver al inicio</a>
</div>

{% endblock %}
