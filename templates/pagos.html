{% extends "base.html" %}
{% block title %}Registro de pagos{% endblock %}
{% block content %}

<h2 class="mb-4">Registro de pagos</h2>

<form method="POST" class="row g-3 mb-4">
    <div class="col-md-3">
        <label class="form-label">Fecha del pago</label>
        <input type="date" name="fecha" class="form-control" required>
    </div>
    <div class="col-md-3">
        <label class="form-label">Tipo de comida</label>
        <select name="tipo" class="form-select" required>
            <option value="almuerzo">Almuerzo</option>
            <option value="cena">Cena</option>
        </select>
    </div>
    <div class="col-md-3">
        <label class="form-label">Cantidad de comidas</label>
        <input type="number" name="cantidad" class="form-control" min="1" required>
    </div>
    <div class="col-md-3">
        <label class="form-label">Monto total pagado</label>
        <input type="number" name="monto" class="form-control" step="0.01" min="0" required>
    </div>
    <div class="col-12">
        <button type="submit" class="btn btn-primary">Registrar pago</button>
    </div>
</form>

<h3 class="mt-5">Pagos registrados</h3>
<div class="table-responsive">
    <table class="table table-bordered table-striped">
        <thead class="table-light">
            <tr>
                <th>Fecha</th>
                <th>Tipo</th>
                <th>Cantidad</th>
            </tr>
        </thead>
        <tbody>
            {% for p in pagos %}
            <tr>
                <td>{{ p[0] }}</td>
                <td>{{ p[1] }}</td>
                <td>{{ p[2] }}</td>
            </tr>
            {% endfor %}
            {% if pagos|length == 0 %}
            <tr><td colspan="3">No hay pagos registrados a√∫n.</td></tr>
            {% endif %}
        </tbody>
    </table>
</div>

<h4 class="mt-4">Totales acumulados</h4>
<ul class="list-group w-50 mb-4">
    <li class="list-group-item d-flex justify-content-between">
        <span>Almuerzos pagados</span>
        <strong>{{ totales.get('almuerzo', 0) }}</strong>
    </li>
    <li class="list-group-item d-flex justify-content-between">
        <span>Cenas pagadas</span>
        <strong>{{ totales.get('cena', 0) }}</strong>
    </li>
</ul>

<a href="/" class="btn btn-secondary">Volver al inicio</a>

{% endblock %}
